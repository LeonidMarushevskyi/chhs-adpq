<div class="ch-page">
    <div class="ch-mail-editor">

        <div class="ch-mail-editor__header">
            <div class="ch-mail-heading">
                <div class="ch-mail-heading__item ch-mail-heading__item_back-control">
                    <button type="button" class="ch-flat-btn ch-flat-btn_back-btn" ng-click="backToPreviousState()">
                    </button>
                </div>
                <div class="ch-mail-heading__item ch-mail-heading__item_heading">
                    <h2 class="ch-new-mail-heading">
                        {{!isReplyOn ? 'New Mail' : mail.subject}}
                    </h2>
                </div>
                <div class="ch-mail-heading__item ch-mail-heading__item_attach-btn">
                    <div class="ch-mail-attach-files">
                        <div class="ch-mail-attach-files__btn">
                            <a class="ch-link-btn ch-link-btn_icon ch-link-btn_icon_attach-files" role="button">Attach files</a>
                        </div>
                    </div>
                </div>
                <div class="ch-mail-heading__item ch-mail-heading__item_action-btn">
                    <button type="button" class="ch-option-btn ch-option-btn_short-text" ng-click="sendMail()">
                        <span class="ch-option-btn__text">{{isReplyOn ? 'Reply' : 'Send'}}</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="ch-mail-editor__body">
            <div class="ch-new-mail">

                <div class="ch-new-mail__row">
                    <div class="ch-new-mail-field">

                        <div ng-if="!isReplyOn" class="ch-new-mail-field__label">
                            <button type="button" class="ch-dropdown-label-btn" ng-click="showContacts = !showContacts">
                                <span class="ch-dropdown-label-btn__text">To:</span>
                            </button>
                        </div>

                        <div ng-if="isReplyOn" class="ch-new-mail-field__label">
                            <span class="ch-dropdown-label-btn__text">To:</span>
                        </div>

                        <input type="text" class="ch-new-mail-field__input" ng-click="showContacts = !showContacts"
                               ng-readonly="true" value="{{mail.to.firstName}} {{mail.to.lastName}}">
                    </div>
                </div>

                <div ng-if="showContacts && !isReplyOn" class="ch-new-mail__row ch-new-mail__row_no-pad">
                    <div class="ch-contacts-dropdown">
                        <ul class="ch-contacts-list">
                            <li ng-repeat="contact in contacts" class="ch-contacts-list__item">
                                <div class="ch-contact-id" ng-click="selectContact(contact)">
                                    <span class="icon icon-contact ch-contact-id__icon"></span>
                                    <span class="ch-contact-id__name">{{contact.firstName}} {{contact.lastName}}</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div ng-if="isNewMail" class="ch-new-mail__row">
                    <div class="ch-new-mail-field">
                        <input type="text" class="ch-new-mail-field__input" ng-model="mail.subject" placeholder="Subject:">
                    </div>
                </div>

                <div class="ch-new-mail__row">
                    <div class="ch-new-mail-text-body">
                        <textarea cols="30" rows="20" ng-model="mail.body" class="ch-new-mail-text-body__text-input"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
